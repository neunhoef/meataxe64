<html>
<head>
<title>
Design decision during construction of meataxe
</title>
</head>
<body>
<h1>
Design decision during construction of meataxe
</h1>
<ul>
<li>
Maintain external printed form as per sources on Birmingham website.
In particular, header is a two digit nod (number of digits), followed
by three six digit fields, the prime power, nor (number of rows) and
noc (number of columns). nod determines how many digits will be
consumed per matrix entry. Matrices are printed at a maximum of 80
characters per line.
</li>
<li>
Internally, all matrices are held as arrays of unsigned ints. Field
values are packed into these, with the least significant bits
corresponding to lower column numbers. Some wastage may occur at word
boundaries, if the prime power does not require a number of bits which
is a power of two (eg 5 or 7). This contrasts with meataxe 6, which
appears to use unsigned chars in a bit big endian fashion.
</li>
<li>
Binary matrices are held in essentially the same as form as
internally, except that they are always little endian. Endian
conversion takes place on input and output. This allows different
endian machines, eg Sparcs and PCs, to use the same binary format
whilst achieving internal efficiency. Each binary matrix contains a
three word header, consisting of prime power, nor, noc, in little
endian format. Again, this is in contrast to meataxe 6. As far as I
can tell, meataxe six did not consider the problem of a consistent
external binary representation, and hence big and little endian
machines would be unable to operate on the same file data.
</li>
<li>
-1 is represented as p-1, and indeed all elements of GF(p) are
represented as their integer minimal non-negative coset
representatives.
</li>
<li>
Permutations are represented (in printed form) as a list of images of
1 .. n, rather than in cycle notation for example.
</li>
<li>
Permutations are represented internally as a header with nor = range
size, noc = image size (to allow non-bijective maps), and prime 1.
Unfortunately, there is no way of representing this in the printed
form.
</li>
<li>
Split matrices for the extended operations system are represented as a
directory containing a special file called map. map has two six digit
fields as its first row, indicating respectively the number of rows
and columns into which the matrix has been split. The remaining lines
of map are one per row, and each entry is the name of a file
representing that row and column position in the matrix. The names
used are typically of the form n_m, although this is not a requirement.
</li>
<li>
Return code 1 is a general failure. Return code 2 is out of memory,
from which we may recover by rerunning with more memory. High value
codes come only from scripts and indicate other failures which
generally indicate inappropriate operations, eg nullity zero when
nullity non-zero was required.
</li>
<li>
Permutations may be used in many places where matrices were required,
and may be added and multiplied. In the case of multiply, two
permutations multiply to give a further permutation.
</li>
<li>
</li>
<li>
</li>
<li>
</li>
<li>
</li>
<li>
</li>
</ul>
</body>
</html>
